<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="jQuery/jquery-1.6.4.js" type="text/javascript"></script>
<script type="text/javascript" >
jQuery.extend(jQuery.expr[":"],{
    "nth-child" : function(elem, match){    //按an+b公式比對元素，參數elem表示檢查元素，match表示比對傳回的陣列
        var index = $(elem).parent().children().index(elem) + 1;    //重新計算序號，起始位置為1，而不是0
        var num = match[3].match(/((\d+)n)?\+(\d+)?/);    //使用match()方法比對a(b(c))格式中的"b(c)"字串
        if(num[2] == undefined){    //若果an+b公式中，a不詳，則直接傳回b作為序號
            return index == num[3];
        }
        else if(num[3] == undefined){     //若果an+b公式中，b不詳，則直接傳回0作為序號
            num[3] = 0;    
        }
        return (index-num[3]) % num[2] == 0;    //最後根據公式測試目前元素是否比對
    }
})

$(function(){
    $("p:nth-child(3n+2)").css("color","red");    //比對3n+2位置上的元素
})


</script>
<style type="text/css">
</style>
<title>上機練習</title>
</head>
<body>
<p>段落文字1</p>
<p>段落文字2</p>
<p>段落文字3</p>
<p>段落文字4</p>
<p>段落文字5</p>
<p>段落文字6</p>
</body>
</html>
